import{t as B,c as k,f as q,r as T,s as x,g as F,a as A,b as D,d as H,e as I,i as z,h as $,j,k as N}from"./assets/menu-DaDsKWtH.js";import{T as v}from"./assets/vendor-BcxMf0ji.js";class E{constructor({container:e,totalPages:a,onPageChange:n}){this.container=e,this._totalPages=a,this._currentPage=1,this.onPageChange=n,this.render()}get currentPage(){return this._currentPage}set currentPage(e){e<1||e>this._totalPages||e===this._currentPage||(this._currentPage=e,this.onPageChange(e),this.render())}render(){if(this.container.innerHTML="",this._totalPages<1)return;const e=({label:i,page:o,isActive:c=!1,isDisabled:h=!1,arrowButton:u=!1})=>`
      <button class="${c?"active ":""}${u?"arrow-button":""}" data-page="${o}" ${h?"disabled":""}>${i}</button>
    `;let a="";this._totalPages>3&&(a+=e({label:"<<",page:1,isDisabled:this._currentPage===1,arrowButton:!0}),a+=e({label:"<",page:this._currentPage-1,isDisabled:this._currentPage===1,arrowButton:!0}));let n,r;this._totalPages<=5?(n=1,r=this._totalPages):this._currentPage<=3?(n=1,r=4):this._currentPage>=this._totalPages-2?(n=this._totalPages-3,r=this._totalPages):(n=this._currentPage-1,r=this._currentPage+1),n>1&&(a+=e({label:1,page:1}),n>2&&(a+='<span class="ellipsis">...</span>'));for(let i=n;i<=r;i++)a+=e({label:i,page:i,isActive:i===this._currentPage});r<this._totalPages&&(r<this._totalPages-1&&(a+='<span class="ellipsis">...</span>'),a+=e({label:this._totalPages,page:this._totalPages})),this._totalPages>3&&(a+=e({label:">",page:this._currentPage+1,isDisabled:this._currentPage===this._totalPages,arrowButton:!0}),a+=e({label:">>",page:this._totalPages,isDisabled:this._currentPage===this._totalPages,arrowButton:!0})),this.container.insertAdjacentHTML("beforeend",a),this.container.querySelectorAll("button[data-page]").forEach(i=>{const o=parseInt(i.getAttribute("data-page"),10);i.addEventListener("click",()=>this.currentPage=o)})}setTotalPages(e){this._totalPages!==e&&(this._totalPages=e,this.render())}}const O=()=>{const l=document.querySelector(".categories-list"),e=document.querySelector(".filters-title"),a=document.querySelector("#filters"),n=document.querySelector(".pagination"),r=document.querySelector(".exercises-list"),i=document.querySelector(".search-form"),o=document.querySelector(".search-input"),c=document.querySelector(".clear-button");let h="Muscles",u,f,y="",_="";o.addEventListener("input",()=>B(o,c)),c.addEventListener("click",()=>k(o,c)),i.addEventListener("submit",t=>L(t));const L=t=>{t.preventDefault();const s=o.value.trim();b({category:y,filter:_,keyword:s||"",resetPagination:!0})},C=(t,s)=>{l.innerHTML="",l.style.display="grid",r.style.display="none",i.style.display="none",T(e,null),l.insertAdjacentHTML("beforeend",t&&t.length?D(t):"<p>No categories found for the selected filter.</p>"),s&&s(e)},M=(t,s)=>{r.innerHTML="",l.style.display="none",r.style.display="grid",i.style.display="flex",T(e,s),x(e),r.insertAdjacentHTML("beforeend",t&&t.length?F(t):"<p>No exercises found for the selected category and filter.</p>")},w=t=>{document.querySelectorAll(".filter-button").forEach(s=>{s.classList.toggle("active",s.dataset.filter===t)})},m=async({filter:t,page:s=1,resetPagination:p=!1,scrollToElement:P})=>{h=t,w(t);const g=await A(t,s);C(g.results,P),!u||p?u=new E({container:n,totalPages:g.totalPages,onPageChange:d=>m({filter:h,page:d,scrollToElement:P})}):u.setTotalPages(g.totalPages)},b=async({category:t,filter:s,keyword:p="",page:P=1,resetPagination:g=!1})=>{y=t,_=s;const d=await q({bodypart:s==="Body parts"?t:"",muscles:s==="Muscles"?t:"",equipment:s==="Equipment"?t:"",keyword:p,page:P,limit:10});M(d.results,t),g||!f?f=new E({container:n,totalPages:d.totalPages,onPageChange:S=>b({category:t,filter:s,keyword:p,page:S})}):f.setTotalPages(d.totalPages)};l.addEventListener("click",t=>{const s=t.target.closest(".categories-list-item");s&&b({category:s.dataset.name,filter:s.dataset.filter,resetPagination:!0})}),a.addEventListener("click",t=>{const s=t.target.closest(".filter-button");s&&m({filter:s.dataset.filter,resetPagination:!0})}),m({filter:"Muscles"})},Q=()=>{document.getElementById("subscription-form").addEventListener("submit",async e=>{var r,i;e.preventDefault();const a=e.target.elements.email,n=a.value;try{await H(n)&&(v({text:"Subscription successful!",duration:3e3,backgroundColor:"#4CAF50",close:!0}).showToast(),a.value="")}catch(o){const c=((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)||o.message||"An error occurred. Please try again later.";v({text:c,duration:3e3,backgroundColor:"#FF5F6D",close:!0}).showToast()}})},G=()=>{const l=document.getElementById("scrollToTopBtn"),e=()=>{window.scrollTo({top:0,behavior:"smooth"})},a=()=>{document.body.scrollTop>100||document.documentElement.scrollTop>100?l.classList.add("active"):l.classList.remove("active")};window.addEventListener("scroll",I(a,200)),l.addEventListener("click",e)};document.addEventListener("DOMContentLoaded",()=>{z(),$(),O(),j(),N(),Q(),G()});
//# sourceMappingURL=index.js.map
